<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>الحافظة</title>

  <!-- ⚡ تفعيل Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- 🎨 ربط ملف التنسيق -->
  <link rel="stylesheet" href="style.css">

  <!-- 🧠 ربط ملف السكربت -->
  <script defer src="script.js"></script>

  <!-- 📱 ربط ملف manifest للتطبيق -->
  <link rel="manifest" href="manifest.json">
</head>

<body>
<!-- 🧱 انشاء شريط التبويبات في الاعلى -->
<div id="tabContainer" class="p-2 flex gap-4 bg-white border-b z-50"></div>

<!-- ✍️ مربع الإدخال -->
<!-- هنا تم تقليل الفراغ حول مربع الإدخال للجوال لسهولة التصفح -->
<div id="textarea" class="pt-0 pb-0 bg-white border-b"></div>

<!-- موقع الكتابة داخل مربع الإدخال -->
<div id="newNoteInput" contenteditable="true" placeholder="✍️ اكتب ملاحظتك هنا..." class="w-full h-20 p-3 border rounded text-right outline-none resize-none" style="min-height: 80px;"></div>

<!-- input مخفي لاختيار الصورة -->
<input type="file" id="imageInput" accept="image/*" style="display: none;">

<!-- 🧭شريط التحكم(حفظ.تراجع.اعادة)-مرن على سطر واحد -->
<div class="pt-1 pb-1 px-12 bg-white border-b flex flex-nowrap overflow-x-auto gap-1 justify-center w-full"> <!-- تقليل المسافة أعلى واسفل شريط الأزرار + محاذاة للوسط + مسافة جانبية -->

  <button onclick="saveNewNote()" class="tab-btn" style="background-color:#16a34a;color:white;border-color:#16a34a;padding:5px 2px;font-size:11px;">✅ حفظ</button>

  <button onclick="undoNote()" class="tab-btn" style="padding:5px 2px;font-size:11px;">تراجع</button>

  <button onclick="redoNote()" class="tab-btn" style="padding:5px 2px;font-size:11px;">إعادة</button>

  <!-- زر تحميل الصورة -->
  <button id="uploadImageBtn" class="tab-btn" style="background-color:#007bff;color:white;border-color:#007bff;padding:5px 2px;font-size:11px;">📷 تحميل صورة</button>

</div>

<!-- 🗂️ منطقة عرض الملاحظات -->
<div id="notesContainer" class="p-2"></div>

<!-- 📝 نافذة التحرير الكبيرة المنبثقة -->
<div id="editModal" class="hidden">
  <div style="position: fixed; inset: 0; background: white; padding: 0; border-radius: 0; max-width: 100vw; width: 100vw; height: 100vh; margin: 0; display: flex; flex-direction: column; justify-content: flex-start; align-items: stretch; z-index: 999;">

      <button onclick="closeEditModal()" style="position: absolute; top: 1px; right: 1px; font-size: 1.5rem; background: none; border: none; color: #888; z-index: 1000;">✖</button>

      <div id="editTextarea" contenteditable="true" placeholder="داخل النافذة..." style="width: 96vw; flex: 1; min-height: 200px; margin: 18px auto 10px auto; display: block; padding: 15px; border: 1.5px solid #bbb; border-radius: 12px; direction: rtl; background: #f9f9f9; overflow-y: auto; outline: none;"></div>

      <!-- نافذة الترجمة -->
      <div id="translateModal" class="hidden" style="position: fixed; inset: 0; background: rgba(0,0,0,0.8); display: flex; align-items: center; justify-content: center; z-index: 1001;">
        <div style="background: white; padding: 20px; border-radius: 10px; width: 100vw; height: 90vh; max-width: 100vw; max-height: 90vh; overflow-y: auto;">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
            <div style="display: flex; align-items: center;">
              <select id="sourceLangSelect" style="padding: 2px 5px; border: 1px solid #ddd; border-radius: 3px;">
                <option value="auto">كشف تلقائي</option>
                <option value="ar">العربية</option>
                <option value="en">الإنجليزية</option>
                <option value="fr">الفرنسية</option>
                <option value="de">الألمانية</option>
                <option value="es">الإسبانية</option>
                <option value="it">الإيطالية</option>
                <option value="pt">البرتغالية</option>
                <option value="ru">الروسية</option>
                <option value="zh">الصينية</option>
                <option value="ja">اليابانية</option>
                <option value="ko">الكورية</option>
              </select>
              <button onclick="swapLanguages()" style="background: #f0f0f0; border: 1px solid #ddd; padding: 5px 10px; border-radius: 50%; cursor: pointer; font-size: 16px; margin: 0 10px;">↔️</button>
              <select id="targetLangSelect" style="padding: 2px 5px; border: 1px solid #ddd; border-radius: 3px;">
                <option value="ar">العربية</option>
                <option value="en">الإنجليزية</option>
                <option value="fr">الفرنسية</option>
                <option value="de">الألمانية</option>
                <option value="es">الإسبانية</option>
                <option value="it">الإيطالية</option>
                <option value="pt">البرتغالية</option>
                <option value="ru">الروسية</option>
                <option value="zh">الصينية</option>
                <option value="ja">اليابانية</option>
                <option value="ko">الكورية</option>
              </select>
            </div>
            <button onclick="closeTranslateModal()" style="background: #dc3545; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer;">✖</button>
          </div>
          <div style="display: flex; gap: 10px; height: calc(90vh - 140px);">
            <div style="flex: 1; display: flex; flex-direction: column;">
              <label style="display: block; font-weight: bold; margin-bottom: 5px;">النص الأصلي:</label>
              <textarea id="originalText" style="white-space: pre-wrap; line-height: 1.5; direction: rtl; padding: 10px; border: 1px solid #ddd; border-radius: 5px; background: #f9f9f9; flex: 1; width: 100%; resize: none; font-family: inherit; font-size: var(--note-font-size, 13px);"></textarea>
              <button onclick="copyOriginalText()" style="margin-top: 5px; padding: 5px 10px; background: #007bff; color: white; border: none; border-radius: 3px; cursor: pointer;">📄 نسخ الأصلي</button>
            </div>
            <div style="flex: 1; display: flex; flex-direction: column;">
              <label style="display: block; font-weight: bold; margin-bottom: 5px;">الترجمة:</label>
              <textarea id="translatedText" style="white-space: pre-wrap; line-height: 1.5; direction: ltr; padding: 10px; border: 1px solid #ddd; border-radius: 5px; background: #f9f9f9; flex: 1; width: 100%; resize: none; font-family: inherit; font-size: var(--note-font-size, 13px);"></textarea>
              <button onclick="copyTranslatedText()" style="margin-top: 5px; padding: 5px 10px; background: #28a745; color: white; border: none; border-radius: 3px; cursor: pointer;">📄 نسخ الترجمة</button>
            </div>
          </div>
        </div>
      </div>

      <div style="display: flex; gap: 2px; align-items: center; margin: 5px 5px; flex-wrap: wrap; justify-content: center; padding-bottom: 5px;">

        <button onclick="saveEditedText()" style="background-color: #007bff; color: white; padding: 5px 3px; font-size: 0.8rem; border: none; border-radius: 10px; flex-shrink: 0;">💾حفظ</button>

        <button type="button" onclick="undoEditText()" style="background-color: #f59e42; color: white; padding: 3px 4px; font-size: 0.8rem; border: none; border-radius: 8px;">↩️ تراجع</button>

        <button type="button" onclick="redoEditText()" style="background-color: #16a34a; color: white; padding: 3px 4px; font-size: 0.8rem; border: none; border-radius: 8px;">↪️ إعادة</button>

        <!-- أزرار تكبير/تصغير خط في نافذة التحرير -->
        <button type="button" onclick="increaseEditFont()" style="background-color: #555; color: white; padding: 3px 4px; font-size: 0.8rem; border: none; border-radius: 8px;">+ معاينة</button>

        <button type="button" onclick="decreaseEditFont()" style="background-color: #555; color: white; padding: 3px 4px; font-size: 0.8rem; border: none; border-radius: 8px;">− معاينة</button>

        <!-- زر الترجمة -->
        <button type="button" onclick="translateText()" style="background-color: #4285f4; color: white; padding: 3px 4px; font-size: 0.8rem; border: none; border-radius: 8px;">🌐 ترجمة</button>

      </div>
    </div>
	</div>

</body>
</html>








